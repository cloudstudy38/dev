events {}

http {
    server {
        listen 80;

        # Allow only from 08:00 to 16:59 (17:00 and later gets blocked)
        #
        # Regex explanation:
        #   (08|09|1[0-6]) → hours 08–16
        #
        # If the request time does NOT match these hours, return 403
        if ($time_local !~ "^[A-Za-z]{3}, [0-9]{2} [A-Za-z]{3} .* (08|09|1[0-6]):") {
            return 403 "Service available only between 08:00 and 17:00 EST\n";
        }

        location / {
            proxy_pass http://wordpress:80;
        }
    }
}
